# 状态保存指南

## 核心思路

不需要复杂的版本管理。沙盒里的任务通常不会太长，关键是**能恢复**就行。

---

## 最简方案：任务文件本身就是状态

`tasks/current.yaml` 已经记录了：
- 当前做到哪一步
- 相关的文件
- 笔记

**只要保持这个文件更新，就能恢复。**

---

## 需要检查点吗？

大多数情况**不需要**单独的检查点文件。

| 场景 | 做法 |
|------|------|
| 普通任务 | 更新 `tasks/current.yaml` 就够了 |
| 长任务（超过2小时） | 可以保存一个检查点 |
| 准备做有风险操作 | 保存一个检查点 |

---

## 如果需要检查点

只保留 **2 个文件**：

```
.workspace/
├── state.yaml          # 当前状态（随时更新）
└── state_backup.yaml   # 上一个状态（覆盖前先备份）
```

**更新流程**：
```
1. 把 state.yaml 复制为 state_backup.yaml
2. 更新 state.yaml
```

**state.yaml 内容**：
```yaml
更新时间: 2026-01-28 14:30

当前任务: 调研XX公司
进度: 3/6 步

笔记: |
  做到技术能力分析了
  下一步是商业模式
```

---

## 恢复

```
1. 读 tasks/current.yaml 看任务状态
2. 如果任务文件丢了，读 .workspace/state.yaml
3. 如果还是不行，读 state_backup.yaml
```

---

## 总结

- **默认**：靠 `tasks/current.yaml` 就够
- **可选**：`.workspace/state.yaml` 作为额外保险
- **最多**：2 个状态文件，不要更多
